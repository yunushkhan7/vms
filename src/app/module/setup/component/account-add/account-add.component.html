<section class="side_container">
  <div class="container-fluid">
    <div class="main-page">
      <div class="main-div padding-x">
        <div class="d-flex justify-content-between">
        </div>
        <div class="d-flex justify-content-between">
        </div>
        <form [formGroup]="addForm" class="pt-1 row justify-content-between" (keydown.enter)="$event.preventDefault()">
          <hr />
          <!-- userName-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">User Name</label>
            <div [ngClass]="{'disable': isEditing}">
              <mat-form-field appearance="outline" class="w-100">
                <input [readonly]="isEditing" maxlength="100" matInput 
                [formControl]="addForm.controls['userName']" 
                placeholder="User Name"/>
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['userName'].errors">User Name
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>

              <mat-error *ngIf="addForm.get('userName')?.errors?.pattern">
                Invalid Input Data
              </mat-error>
            </div>
          </div>

          <!-- emailId-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Email Id</label>
            <div [ngClass]="{'disable': isEditing}">
              <mat-form-field appearance="outline" class="w-100">
                <input [readonly]="isEditing" type="email" matInput [formControl]="addForm.controls['emailId']" 
                placeholder="Email Id" />
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['emailId'].errors">Email Id
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
            </div>
          </div>

          <!-- firstName-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">First Name</label>
            <div class="">
              <mat-form-field appearance="outline" class="w-100">
                <input matInput maxlength="100" onlyCharacters 
                [formControl]="addForm.controls['firstName']" (click)="editingInputClick()"
                placeholder="First Name" />
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['firstName'].errors">First Name
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
              <mat-error *ngIf="addForm.get('firstName')?.errors?.pattern">
                Invalid Input Data
              </mat-error>
            </div>
          </div>

          <!-- lastName-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Last Name</label>
            <div class="">
              <mat-form-field appearance="outline" class="w-100">
                <input matInput maxlength="100" onlyCharacters 
                [formControl]="addForm.controls['lastName']" (click)="editingInputClick()"
                placeholder="Last Name" />
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['lastName'].errors">Last Name
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
              <mat-error *ngIf="addForm.get('lastName')?.errors?.pattern">
                Invalid Input Data
              </mat-error>
            </div>
          </div>

          <!--primaryContact-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Primary Contact</label>
            <div class="">
              <div class="input-phone" [ngClass]="{
                'red-border-class':
                  submitted && addForm.controls['primaryContact'].errors
              }">
                <ng-container>
                  <ngx-intl-tel-input class="example-full-width" appearance="outline" 
                      [preferredCountries]="['sg']" 
                      [onlyCountries]="['sg']" 
                      [selectedCountryISO]="selectedCountryISO" 
                      [maxLength]="8" 
                      [enableAutoCountrySelect]="false" 
                      [selectFirstCountry]="false" 
                      [enablePlaceholder]="true" 
                      [searchCountryFlag]="false" 
                      [separateDialCode]="true" 
                      [phoneValidation]="true" 
                      name="primaryContact" 
                      [formControl]="addForm.controls['primaryContact']" 
                      customPlaceholder="65XXXXXX" 
                      class="tel-input">
                  </ngx-intl-tel-input>
                </ng-container>
              </div>
              <mat-error *ngIf="addForm['controls']['primaryContact']?.touched &&
              addForm['controls']['primaryContact']?.errors?.required">
              Contact field is required
            </mat-error>
            <mat-error *ngIf="addForm.get('primaryContact')?.touched && addForm.get('primaryContact')?.invalid 
            && addForm['controls']['primaryContact']?.errors?.required != true">
              Enter valid number
            </mat-error>

              <mat-error *ngIf="submitted && addForm.controls['primaryContact'].errors">Primary Contact
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
              <mat-error *ngIf="addForm.get('primaryContact')?.errors?.pattern">
                Invalid Input Data
              </mat-error>
            </div>
          </div>

          <!--Secondary Contact-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Secondary Contact</label>
            <div class="">
              <div class="input-phone" [ngClass]="{
                'red-border-class':
                  submitted && addForm.controls['primaryContact'].errors
              }">
                <ng-container>
                  <ngx-intl-tel-input class="example-full-width" appearance="outline" 
                      [preferredCountries]="['sg']" 
                      [onlyCountries]="['sg']" 
                      [selectedCountryISO]="selectedCountryISO" 
                      [maxLength]="8" 
                      [enableAutoCountrySelect]="false" 
                      [selectFirstCountry]="false" 
                      [enablePlaceholder]="true" 
                      [searchCountryFlag]="false" 
                      [separateDialCode]="true" 
                      [phoneValidation]="true" 
                      name="secondaryContact" 
                      [formControl]="addForm.controls['secondaryContact']" 
                      customPlaceholder="65XXXXXX" 
                      class="tel-input">
                  </ngx-intl-tel-input>
                </ng-container>
              </div>
              <!-- <mat-error *ngIf="addForm['controls']['secondaryContact']?.touched &&
              addForm['controls']['secondaryContact']?.errors?.required">
              Contact field is required
            </mat-error> -->
            <mat-error *ngIf="addForm.get('secondaryContact')?.touched && addForm.get('secondaryContact')?.invalid 
            && addForm['controls']['secondaryContact']?.errors?.required != true">
              Enter valid number
            </mat-error>
            </div>
          </div>

          <!--roleName-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Role Name</label>
            <div class="" [ngClass]="{'disable': isEditing}">
              <mat-form-field appearance="outline" class="w-100">
                <mat-select placeholder="Select Role" [formControl]="addForm.controls['roleName']">
                  <mat-option *ngFor="let role of roleList" [value]="role?.roleName" (click)="selectRole(role)">
                    {{ role?.roleName }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['roleName'].errors">Role
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
            </div>
          </div>


          <!-- profilePicture-->
          <div class="form-group w-45 input-fildcl">
            <label class="control-label">Profile Picture</label>
            <div class="">
              <mat-form-field appearance="outline" class="w-100" (click)="fileInputProfiles.click()">
                <input [formControl]="addForm.controls['profilePicture']" matInput readonly
                  placeholder="Upload Profile Picture" (click)="editingInputClick()"/>
                <img class="upload-icon" src="assets/images/Upload.svg" />
                <input hidden #fileInputProfiles accept="image/x-png,image/jpeg" (change)="fileChangeEvents($event)"
                  type="file" file-model="myFile" />
              </mat-form-field>
              <mat-error *ngIf="submitted && addForm.controls['profilePicture'].errors">Profile Picture
                {{ "VALIDATE.ERROR9" | translate }}
              </mat-error>
            </div>
          </div>


          <div class="d-flex justify-content-end margin-y">
            <button class="btn-black2" type="button" mat-flat-button (click)="back()">{{'COMMON.BACK' | translate}}</button>
            <button class="btn-blue" type="submit" [disabled]="addForm.invalid || !inputedit" mat-flat-button (click)="submitForm()">{{'COMMON.SUBMIT' | translate}}</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</section>
